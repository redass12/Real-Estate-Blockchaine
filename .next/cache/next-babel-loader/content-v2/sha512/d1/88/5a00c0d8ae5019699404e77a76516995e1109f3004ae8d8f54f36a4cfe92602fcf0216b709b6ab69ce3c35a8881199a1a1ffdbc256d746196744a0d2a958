{"ast":null,"code":"var _jsxFileName = \"E:\\\\ReaEstat-Mini Project\\\\pages\\\\My-Houses\\\\myHouses.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport { Card, Button, Image, Icon } from \"semantic-ui-react\";\nimport Layout from \"../../components/Layout\";\nimport RealEstate from \"../../ethereum/RealEstate\";\nimport web3 from \"../../ethereum/web3\";\nimport { Link, Router } from \"../../routes\";\n\nclass myHouses extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      loadingInSell: false,\n      loadingNotSell: false\n    });\n\n    _defineProperty(this, \"renderTokens\", () => {\n      const filtredArray = this.props.tokens.filter(item => {\n        return item[3] !== \"\";\n      });\n      console.log(\"filtred Array \", filtredArray); //https://ipfs.io/ipfs/0x22059D87851EE41A824FEa59A4336E444679E37a\n\n      const tokens = filtredArray.map((item, index) => {\n        return __jsx(Card, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 9\n          }\n        }, __jsx(Image, {\n          src: `https://ipfs.io/ipfs/${item[3]}`,\n          wrapped: true,\n          ui: false,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 11\n          }\n        }), __jsx(Card.Content, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 11\n          }\n        }, __jsx(Card.Header, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 13\n          }\n        }, item[1]), __jsx(Card.Meta, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 13\n          }\n        }, __jsx(\"span\", {\n          className: \"date\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 15\n          }\n        }, item[2])), __jsx(Card.Description, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 13\n          }\n        }, \"Matthew is a musician living in Nashville.\"), __jsx(Card.Content, {\n          extra: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 13\n          }\n        }, __jsx(Button, {\n          color: \"green\",\n          disabled: item[4],\n          loading: this.state.loadingInSell,\n          onClick: this.sellToken.bind(null, index, item[5], item[0]),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 15\n          }\n        }, \"Put In Sell\"), __jsx(Button, {\n          color: \"red\",\n          disabled: !item[4],\n          loading: this.state.loadingNotSell,\n          onClick: this.stopSellToken.bind(null, index, item[5], item[0]),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }\n        }, \"Stop In Sell\"))));\n      });\n      return tokens;\n    });\n\n    _defineProperty(this, \"sellToken\", async (index, id1, id2) => {\n      this.setState({\n        loadingInSell: true\n      });\n\n      try {\n        await RealEstate.methods.putTokenInSell(index, parseInt(id1, 10), parseInt(id2, 10)).send({\n          from: this.props.owner\n        });\n      } catch (err) {\n        console.log(err);\n      }\n\n      this.setState({\n        loadingInSell: false\n      });\n    });\n\n    _defineProperty(this, \"stopSellToken\", async (index, id1, id2) => {\n      this.setState({\n        loadingNotSell: true\n      });\n\n      try {\n        console.log(\"fasdfsadf\");\n        const accounts = await web3.eth.getAccounts();\n        await RealEstate.methods.stopSellToken(index, parseInt(id1, 10), parseInt(id2, 10)).send({\n          from: this.props.owner\n        });\n      } catch (err) {\n        console.log(err);\n      }\n\n      this.setState({\n        loadingNotSell: false\n      });\n    });\n  }\n\n  static async getInitialProps(props) {\n    const owner = props.query.address;\n    const numberOfTokens = await RealEstate.methods.getNoOfTokenByOwner(owner).call();\n    const tokens = await Promise.all(Array(parseInt(numberOfTokens)).fill().map((element, index) => {\n      return RealEstate.methods.getTokenByOwner(owner, index).call();\n    }));\n    return {\n      tokens,\n      owner\n    };\n  }\n\n  render() {\n    console.log(\"asfasfasdf\", this.props.tokens);\n    return __jsx(Layout, {\n      owner: this.props.owner,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }, __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }, \"My Homes \"), this.renderTokens()));\n  }\n\n}\n\nexport default myHouses;","map":{"version":3,"sources":["E:/ReaEstat-Mini Project/pages/My-Houses/myHouses.js"],"names":["React","Component","Card","Button","Image","Icon","Layout","RealEstate","web3","Link","Router","myHouses","loadingInSell","loadingNotSell","filtredArray","props","tokens","filter","item","console","log","map","index","state","sellToken","bind","stopSellToken","id1","id2","setState","methods","putTokenInSell","parseInt","send","from","owner","err","accounts","eth","getAccounts","getInitialProps","query","address","numberOfTokens","getNoOfTokenByOwner","call","Promise","all","Array","fill","element","getTokenByOwner","render","renderTokens"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Card, Button, Image, Icon } from \"semantic-ui-react\";\r\nimport Layout from \"../../components/Layout\";\r\nimport RealEstate from \"../../ethereum/RealEstate\";\r\nimport web3 from \"../../ethereum/web3\";\r\nimport { Link, Router } from \"../../routes\";\r\n\r\nclass myHouses extends Component {\r\n  state = {\r\n    loadingInSell: false,\r\n    loadingNotSell: false,\r\n  };\r\n  static async getInitialProps(props) {\r\n    const owner = props.query.address;\r\n    const numberOfTokens = await RealEstate.methods\r\n      .getNoOfTokenByOwner(owner)\r\n      .call();\r\n    const tokens = await Promise.all(\r\n      Array(parseInt(numberOfTokens))\r\n        .fill()\r\n        .map((element, index) => {\r\n          return RealEstate.methods.getTokenByOwner(owner, index).call();\r\n        })\r\n    );\r\n    return { tokens, owner };\r\n  }\r\n  renderTokens = () => {\r\n    const filtredArray = this.props.tokens.filter((item) => {\r\n      return item[3] !== \"\";\r\n    });\r\n\r\n    console.log(\"filtred Array \", filtredArray);\r\n    //https://ipfs.io/ipfs/0x22059D87851EE41A824FEa59A4336E444679E37a\r\n\r\n    const tokens = filtredArray.map((item, index) => {\r\n      return (\r\n        <Card>\r\n          <Image src={`https://ipfs.io/ipfs/${item[3]}`} wrapped ui={false} />\r\n          <Card.Content>\r\n            <Card.Header>{item[1]}</Card.Header>\r\n            <Card.Meta>\r\n              <span className=\"date\">{item[2]}</span>\r\n            </Card.Meta>\r\n            <Card.Description>\r\n              Matthew is a musician living in Nashville.\r\n            </Card.Description>\r\n            <Card.Content extra>\r\n              <Button\r\n                color=\"green\"\r\n                disabled={item[4]}\r\n                loading={this.state.loadingInSell}\r\n                onClick={this.sellToken.bind(null, index, item[5], item[0])}\r\n              >\r\n                Put In Sell\r\n              </Button>\r\n              <Button\r\n                color=\"red\"\r\n                disabled={!item[4]}\r\n                loading={this.state.loadingNotSell}\r\n                onClick={this.stopSellToken.bind(null, index, item[5], item[0])}\r\n              >\r\n                Stop In Sell\r\n              </Button>\r\n            </Card.Content>\r\n          </Card.Content>\r\n        </Card>\r\n      );\r\n    });\r\n    return tokens;\r\n  };\r\n\r\n  sellToken = async (index, id1, id2) => {\r\n    this.setState({ loadingInSell: true });\r\n    try {\r\n      await RealEstate.methods\r\n        .putTokenInSell(index, parseInt(id1, 10), parseInt(id2, 10))\r\n        .send({ from: this.props.owner });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n    this.setState({ loadingInSell: false });\r\n  };\r\n\r\n  stopSellToken = async (index, id1, id2) => {\r\n    this.setState({ loadingNotSell: true });\r\n    try {\r\n      console.log(\"fasdfsadf\");\r\n\r\n      const accounts = await web3.eth.getAccounts();\r\n      await RealEstate.methods\r\n        .stopSellToken(index, parseInt(id1, 10), parseInt(id2, 10))\r\n        .send({ from: this.props.owner });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n    this.setState({ loadingNotSell: false });\r\n  };\r\n\r\n  render() {\r\n    console.log(\"asfasfasdf\", this.props.tokens);\r\n    return (\r\n      <Layout owner={this.props.owner}>\r\n        <div>\r\n          <h3>My Homes </h3>\r\n          {this.renderTokens()}\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\nexport default myHouses;\r\n"]},"metadata":{},"sourceType":"module"}