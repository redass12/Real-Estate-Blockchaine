{"ast":null,"code":"import _regeneratorRuntime from \"E:/ReaEstat-Mini Project/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/ReaEstat-Mini Project/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"E:/ReaEstat-Mini Project/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:/ReaEstat-Mini Project/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"E:/ReaEstat-Mini Project/node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"E:/ReaEstat-Mini Project/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"E:/ReaEstat-Mini Project/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:/ReaEstat-Mini Project/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"E:/ReaEstat-Mini Project/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"E:\\\\ReaEstat-Mini Project\\\\pages\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport RealEstate from \"../ethereum/RealEstate\";\nimport { Card, Button, Grid } from \"semantic-ui-react\";\nimport Layout from \"../components/Layout\";\nimport { Link } from \"../routes\";\nimport web3 from \"../ethereum/web3\";\nimport HOC from \"../components/Hoc\";\n\nvar RealEstateIndex = /*#__PURE__*/function (_Component) {\n  _inherits(RealEstateIndex, _Component);\n\n  var _super = _createSuper(RealEstateIndex);\n\n  function RealEstateIndex() {\n    var _this;\n\n    _classCallCheck(this, RealEstateIndex);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      owner: \"\",\n      isContractOwner: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getAccount\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var accounts, owner;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return web3.eth.getAccounts();\n\n            case 2:\n              accounts = _context.sent;\n              owner = accounts[0];\n\n              if (_this.props.contractOwner === accounts[0]) {\n                console.log(\"true true\");\n\n                _this.setState({\n                  isContractOwner: true\n                });\n              }\n\n              _this.setState({\n                owner: owner\n              });\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    return _this;\n  }\n\n  _createClass(RealEstateIndex, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getAccount();\n    }\n  }, {\n    key: \"renderTokens\",\n    value: function renderTokens() {\n      var _this2 = this;\n\n      var tokens = this.props.tokens.map(function (item, index) {\n        return {\n          image: \"https://ipfs.io/ipfs/\".concat(item.image),\n          header: \"\".concat(item.name, \" add: \").concat(item.owner.slice(0, 5)),\n          meta: item.adress,\n          extra: __jsx(\"div\", {\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 11\n            }\n          }, __jsx(\"a\", {\n            \"class\": \"ui tag label\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 13\n            }\n          }, item.price, \" Wei\"), item.inSell ? __jsx(\"a\", {\n            \"class\": \"ui teal tag label\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 15\n            }\n          }, \"In Sell\") : __jsx(\"a\", {\n            \"class\": \"ui red tag label\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 15\n            }\n          }, \"Not In sell Yet\")),\n          description: __jsx(Link, {\n            route: \"/House/\".concat(index),\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 11\n            }\n          }, __jsx(\"a\", {\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 13\n            }\n          }, \"view Home\"))\n        };\n      });\n      return __jsx(Card.Group, {\n        items: tokens,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 12\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (true && typeof window.web3 !== \"undefined\") {\n        ethereum.on(\"accountsChanged\", function (accounts) {\n          _this3.getAccount();\n        });\n      }\n\n      console.log(\"tokens\", this.props.tokens);\n      console.log(this.state.owner);\n      return __jsx(Layout, {\n        owner: this.state.owner,\n        isContractOwner: this.state.isContractOwner,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }\n      }, this.renderTokens()));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var tokenCount, contractOwner, tokens;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return RealEstate.methods.indexx().call();\n\n              case 2:\n                tokenCount = _context2.sent;\n                _context2.next = 5;\n                return RealEstate.methods.owner().call();\n\n              case 5:\n                contractOwner = _context2.sent;\n                _context2.next = 8;\n                return Promise.all(Array(parseInt(tokenCount)).fill().map(function (element, index) {\n                  return RealEstate.methods.indexToToken(index).call();\n                }));\n\n              case 8:\n                tokens = _context2.sent;\n                return _context2.abrupt(\"return\", {\n                  tokens: tokens,\n                  contractOwner: contractOwner\n                });\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getInitialProps() {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return RealEstateIndex;\n}(Component);\n\nexport default _c = HOC(RealEstateIndex);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["E:/ReaEstat-Mini Project/pages/index.js"],"names":["React","Component","RealEstate","Card","Button","Grid","Layout","Link","web3","HOC","RealEstateIndex","owner","isContractOwner","eth","getAccounts","accounts","props","contractOwner","console","log","setState","getAccount","tokens","map","item","index","image","header","name","slice","meta","adress","extra","price","inSell","description","window","ethereum","on","state","renderTokens","methods","indexx","call","tokenCount","Promise","all","Array","parseInt","fill","element","indexToToken"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport RealEstate from \"../ethereum/RealEstate\";\r\nimport { Card, Button, Grid } from \"semantic-ui-react\";\r\nimport Layout from \"../components/Layout\";\r\nimport { Link } from \"../routes\";\r\nimport web3 from \"../ethereum/web3\";\r\nimport HOC from \"../components/Hoc\";\r\nclass RealEstateIndex extends Component {\r\n  state = {\r\n    owner: \"\",\r\n    isContractOwner: false,\r\n  };\r\n  static async getInitialProps() {\r\n    const tokenCount = await RealEstate.methods.indexx().call();\r\n    const contractOwner = await RealEstate.methods.owner().call();\r\n    const tokens = await Promise.all(\r\n      Array(parseInt(tokenCount))\r\n        .fill()\r\n        .map((element, index) => {\r\n          return RealEstate.methods.indexToToken(index).call();\r\n        })\r\n    );\r\n\r\n    return { tokens, contractOwner };\r\n  }\r\n\r\n  getAccount = async () => {\r\n    const accounts = await web3.eth.getAccounts();\r\n    const owner = accounts[0];\r\n    if (this.props.contractOwner === accounts[0]) {\r\n      console.log(\"true true\");\r\n      this.setState({ isContractOwner: true });\r\n    }\r\n    this.setState({ owner: owner });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getAccount();\r\n  }\r\n\r\n  renderTokens() {\r\n    const tokens = this.props.tokens.map((item, index) => {\r\n      return {\r\n        image: `https://ipfs.io/ipfs/${item.image}`,\r\n        header: `${item.name} add: ${item.owner.slice(0, 5)}`,\r\n        meta: item.adress,\r\n        extra: (\r\n          <div>\r\n            <a class=\"ui tag label\">{item.price} Wei</a>\r\n            {item.inSell ? (\r\n              <a class=\"ui teal tag label\">In Sell</a>\r\n            ) : (\r\n              <a class=\"ui red tag label\">Not In sell Yet</a>\r\n            )}\r\n          </div>\r\n        ),\r\n        description: (\r\n          <Link route={`/House/${index}`}>\r\n            <a>view Home</a>\r\n          </Link>\r\n        ),\r\n      };\r\n    });\r\n\r\n    return <Card.Group items={tokens} />;\r\n  }\r\n\r\n  render() {\r\n    if (typeof window !== \"undefined\" && typeof window.web3 !== \"undefined\") {\r\n      ethereum.on(\"accountsChanged\", (accounts) => {\r\n        this.getAccount();\r\n      });\r\n    }\r\n    console.log(\"tokens\", this.props.tokens);\r\n    console.log(this.state.owner);\r\n    return (\r\n      <Layout\r\n        owner={this.state.owner}\r\n        isContractOwner={this.state.isContractOwner}\r\n      >\r\n        <div>{this.renderTokens()}</div>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HOC(RealEstateIndex);\r\n"]},"metadata":{},"sourceType":"module"}