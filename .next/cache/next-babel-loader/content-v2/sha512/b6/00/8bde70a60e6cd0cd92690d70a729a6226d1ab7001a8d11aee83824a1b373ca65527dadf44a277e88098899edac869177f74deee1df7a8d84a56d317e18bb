{"ast":null,"code":"var _jsxFileName = \"E:\\\\ReaEstat-Mini Project\\\\pages\\\\House\\\\new.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport { Form, Input, Button, Segment, Message, Checkbox } from \"semantic-ui-react\";\nimport RealEstate from \"../../ethereum/RealEstate\";\nimport web3 from \"../../ethereum/web3\";\nimport nextId from \"react-id-generator\";\nimport ipfs from \"../../ethereum/ipfs\";\nimport { Router } from \"../../routes\";\n\nclass New extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"id\", nextId());\n\n    _defineProperty(this, \"state\", {\n      name: \"\",\n      address: \"\",\n      price: \"\",\n      image: \"\",\n      buffer: null,\n      id: Date.now(),\n      loading: false,\n      inSell: false\n    });\n\n    _defineProperty(this, \"onSubmit\", async event => {\n      event.preventDefault();\n      ipfs.files.add(this.state.buffer, async (error, result) => {\n        this.setState({\n          loading: true\n        });\n\n        if (error) {\n          console.log(\"this is the erre:1 \", error);\n          return;\n        }\n\n        try {\n          this.setState({\n            image: result[0].hash\n          });\n          const accounts = await web3.eth.getAccounts();\n          await RealEstate.methods.createToken(this.state.id, this.state.name, this.state.address, this.state.price, this.state.image, this.state.inSell).send({\n            from: accounts[0]\n          });\n          Router.pushRoute(\"/\");\n        } catch (err) {\n          console.log(\"errror\");\n        }\n\n        this.setState({\n          loading: false\n        });\n      });\n    });\n\n    _defineProperty(this, \"captureFile\", event => {\n      event.preventDefault();\n      const file = event.target.files[0];\n      const reader = new window.FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onloadend = () => {\n        this.setState({\n          buffer: Buffer(reader.result)\n        });\n      };\n    });\n\n    _defineProperty(this, \"inSellHandler\", (event, {\n      checked\n    }) => {\n      this.setState({\n        inSell: checked\n      });\n    });\n  }\n\n  render() {\n    console.log(\"inSell\", this.state.inSell);\n    return __jsx(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }, __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, \"Create a new Home\"), __jsx(Segment, {\n      inverted: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, __jsx(Form, {\n      inverted: true,\n      onSubmit: this.onSubmit,\n      loading: this.state.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, __jsx(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 15\n      }\n    }, __jsx(Input, {\n      placeholder: \"Name\",\n      value: this.state.name,\n      onChange: event => this.setState({\n        name: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    })), __jsx(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    }, __jsx(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, \"House Price\"), __jsx(Input, {\n      label: \"wei\",\n      labelPosition: \"right\",\n      placeholder: \"House Price\",\n      value: this.state.price,\n      onChange: event => this.setState({\n        price: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    })), __jsx(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }, __jsx(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, \"House Address\"), __jsx(Input, {\n      placeholder: \"House Address\",\n      value: this.state.address,\n      onChange: event => this.setState({\n        address: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    })), __jsx(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 15\n      }\n    }, __jsx(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, \"Upload Image\"), __jsx(Input, {\n      type: \"file\",\n      onChange: this.captureFile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }\n    })), __jsx(Form.Field, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }\n    }, __jsx(Checkbox, {\n      label: \"Put it in Sell\",\n      name: \"inSell\",\n      checked: this.state.inSell,\n      onChange: this.inSellHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    })), __jsx(Message, {\n      error: true,\n      header: \"Oops!\",\n      content: \"sfsdf\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }\n    }), __jsx(Button, {\n      primary: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }, \"Create!\")))));\n  }\n\n}\n\nexport default New;","map":{"version":3,"sources":["E:/ReaEstat-Mini Project/pages/House/new.js"],"names":["React","Component","Layout","Form","Input","Button","Segment","Message","Checkbox","RealEstate","web3","nextId","ipfs","Router","New","name","address","price","image","buffer","id","Date","now","loading","inSell","event","preventDefault","files","add","state","error","result","setState","console","log","hash","accounts","eth","getAccounts","methods","createToken","send","from","pushRoute","err","file","target","reader","window","FileReader","readAsArrayBuffer","onloadend","Buffer","checked","render","onSubmit","value","captureFile","inSellHandler"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Layout from \"../../components/Layout\";\r\nimport {\r\n  Form,\r\n  Input,\r\n  Button,\r\n  Segment,\r\n  Message,\r\n  Checkbox,\r\n} from \"semantic-ui-react\";\r\nimport RealEstate from \"../../ethereum/RealEstate\";\r\nimport web3 from \"../../ethereum/web3\";\r\nimport nextId from \"react-id-generator\";\r\nimport ipfs from \"../../ethereum/ipfs\";\r\nimport { Router } from \"../../routes\";\r\nclass New extends Component {\r\n  id = nextId();\r\n  state = {\r\n    name: \"\",\r\n    address: \"\",\r\n    price: \"\",\r\n    image: \"\",\r\n    buffer: null,\r\n    id: Date.now(),\r\n    loading: false,\r\n    inSell: false,\r\n  };\r\n\r\n  onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    ipfs.files.add(this.state.buffer, async (error, result) => {\r\n      this.setState({ loading: true });\r\n      if (error) {\r\n        console.log(\"this is the erre:1 \", error);\r\n        return;\r\n      }\r\n      try {\r\n        this.setState({ image: result[0].hash });\r\n        const accounts = await web3.eth.getAccounts();\r\n\r\n        await RealEstate.methods\r\n          .createToken(\r\n            this.state.id,\r\n            this.state.name,\r\n            this.state.address,\r\n            this.state.price,\r\n            this.state.image,\r\n            this.state.inSell\r\n          )\r\n          .send({ from: accounts[0] });\r\n\r\n        Router.pushRoute(\"/\");\r\n      } catch (err) {\r\n        console.log(\"errror\");\r\n      }\r\n      this.setState({ loading: false });\r\n    });\r\n  };\r\n\r\n  captureFile = (event) => {\r\n    event.preventDefault();\r\n    const file = event.target.files[0];\r\n    const reader = new window.FileReader();\r\n    reader.readAsArrayBuffer(file);\r\n    reader.onloadend = () => {\r\n      this.setState({ buffer: Buffer(reader.result) });\r\n    };\r\n  };\r\n\r\n  inSellHandler = (event, { checked }) => {\r\n    this.setState({ inSell: checked });\r\n  };\r\n\r\n  render() {\r\n    console.log(\"inSell\", this.state.inSell);\r\n    return (\r\n      <Layout>\r\n        <div>\r\n          <h3>Create a new Home</h3>\r\n          <Segment inverted>\r\n            <Form\r\n              inverted\r\n              onSubmit={this.onSubmit}\r\n              loading={this.state.loading}\r\n            >\r\n              <Form.Field>\r\n                <Input\r\n                  placeholder=\"Name\"\r\n                  value={this.state.name}\r\n                  onChange={(event) =>\r\n                    this.setState({ name: event.target.value })\r\n                  }\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>House Price</label>\r\n                <Input\r\n                  label=\"wei\"\r\n                  labelPosition=\"right\"\r\n                  placeholder=\"House Price\"\r\n                  value={this.state.price}\r\n                  onChange={(event) =>\r\n                    this.setState({ price: event.target.value })\r\n                  }\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>House Address</label>\r\n                <Input\r\n                  placeholder=\"House Address\"\r\n                  value={this.state.address}\r\n                  onChange={(event) =>\r\n                    this.setState({ address: event.target.value })\r\n                  }\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>Upload Image</label>\r\n                <Input type=\"file\" onChange={this.captureFile} />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <Checkbox\r\n                  label=\"Put it in Sell\"\r\n                  name=\"inSell\"\r\n                  checked={this.state.inSell}\r\n                  onChange={this.inSellHandler}\r\n                />\r\n              </Form.Field>\r\n              <Message error header=\"Oops!\" content=\"sfsdf\" />\r\n              <Button primary>Create!</Button>\r\n            </Form>\r\n          </Segment>\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default New;\r\n"]},"metadata":{},"sourceType":"module"}